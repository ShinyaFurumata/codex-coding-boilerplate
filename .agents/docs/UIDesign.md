# AI に関するデザイン実装

- AI に関する機能を実装するときは、まず Vercel AI Elements で使えるものがないか、調べることを最優先にしてください
- AI Chat Tips
  - AI の回答がストリーミングで下に伸びていってもいい感じに表示する
    - ① 最後の 2 つのメッセージ（user と assistant）だけ「min-height がスクリーン高くらい」のボックスの中に入れる
    - ② 最下部までスクロール

# デザインルール

## 0. 非交渉原則（Non‑negotiables）

1. **簡素（Minimal）**: 要素・色・影・装飾を最小限に。情報は厳選する。

2. **明瞭（Clarity）**: 階層は見出し・余白・ウェイトで示す。境界線は薄く控えめ。

3. **速さ（Speed）**: 初回描画を最優先。不要な依存・画像・JS を削る。

4. **コピー先導（Copy‑first）**: 短文・平易・断定 → 補足。1 画面 1 メッセージ。

5. **一貫性（Consistency）**: トークンとスタイル規範を厳守。例外は記録して再利用可能に。

6. **A11y by default**: コントラスト、キーボード、スクリーンリーダー配慮を先に設計。

7. **プライバシー/静けさ**: 追跡や通知は最少。余計なアニメや音は避ける。

8. **可読コード**: セマンティクス優先。マジックナンバー禁止。命名は意図がわかる語。

---

## 1. デザイントークン（技術非依存）

実装は CSS 変数/Design System/テーマ定義等に落とす。

```css
:root {
  /* 色（Neutral + 1 Accent）。数を増やさない */
  --color-bg: #ffffff;
  --color-surface: #f8fafc; /* subtle surface */
  --color-fg: #0f172a; /* main text */
  --color-muted: #475569; /* secondary text */
  --color-border: #e2e8f0; /* hairline borders */
  --color-accent: #2563eb; /* single accent */
  --color-accent-fg: #ffffff;
  --color-success: #16a34a;
  --color-warning: #ca8a04;
  --color-danger: #dc2626;

  /* 余白スケール */
  --space-2: 4px;
  --space-3: 8px;
  --space-4: 12px;
  --space-5: 16px;
  --space-6: 24px;
  --space-8: 32px;
  --space-12: 48px;
  --space-16: 64px;

  /* 角丸/影 */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --radius-pill: 9999px;
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.06);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);

  /* タイポ（数を増やさない） */
  --font-sans: ui-sans-serif, system-ui, -apple-system, "Noto Sans JP", Inter, Roboto,
    "Helvetica Neue", Arial;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", monospace;
  --text-h1: 44px/1.1; /* tracking -0.02 目安 */
  --text-h2: 32px/1.15;
  --text-h3: 24px/1.2;
  --text-body: 16px/1.7;
  --text-small: 14px/1.6;

  /* モーション */
  --ease: cubic-bezier(0.2, 0.8, 0.2, 1);
  --dur-fast: 150ms;
  --dur-base: 200ms;
}
```

**使用ルール**

- 色は **Neutral + Accent 1 色** が原則。意味色（成功/警告/危険）は補助のみ。

- 角丸は `--radius-xl` を上限。丸すぎる見た目を避ける。

- 見出しは短く。本文は 16px 以上。和文は句点「。」を節約し改行で間を取る。

---

## 2. タイポグラフィ規範（言語横断・JA 優先）

- **Sentence case** を基本。全角英語の混用を避ける。

- 行長は 28–70 字に収める。段落間に十分な間（1 段落=下 0.75–1 行分）。

- 強調は太字>色>サイズの順で検討。**赤字での強調は避ける**。

- 数字は半角。単位は国際表記（例: 1,234、MB、%）。日付は ISO/「YYYY 年 M 月 D 日」。

---

## 3. マイクロコピー規範

- 1 画面 1 メッセージ。命令形を避け、**行動が自然に選べる文**にする。

- 主張 → 1 行、補足 → 1–2 文、CTA → 1 つ。

- 不安軽減情報（ローカル保存、ログイン不要、無料など）は**短く**明示。

- エラーは解決策つき（原因 → 対処 → 再実行手段）。責任転嫁を避ける。

**書き方テンプレ（抽象）**

- 主張: 「○○ を、すばやく正確に。」

- 補足: 「データは端末内にのみ保存。いつでも削除できます。」

- CTA: 「今すぐ試す」/「はじめる」

---

## 4. インタラクション規範（全要素に共通）

- **状態**: default / hover / focus-visible / active / disabled / loading を必ず定義。

- **フォーカス**: `2px` 以上の明瞭なリング。非表示にしない。

- **キーボード**: タブ順は視覚順と一致。トラップを作らない。

- **トースト/通知**: 最少・自動閉鎖。永続通知は設定画面へ誘導。

---

## 5. コンポーネント横断ルール（レイアウト雛形に依存しない）

### 5.1 ボタン/リンク

- 主ボタン=アクセント色/白文字、影は `--shadow-sm` 程度。文言は 2–3 語。

- 破壊的操作は `--color-danger`。確認ダイアログを伴う。

- リンクは **下線** を基本（ホバー時の色変化に依存しない）。

### 5.2 入力/フォーム

- ラベルは上、補助文は短く。必須はアスタリスクでなく「必須」表記。

- 検証は即時+送信時の二段。エラーはフィールド直下に短く。

- プレースホルダを説明にしない（例としてのみ）。

### 5.3 カード/パネル

- `--radius-lg`、`--shadow-sm`、薄いボーダー。余白は中以上。

- 見出し → 本文 →（任意）小要素の順で。過剰な区切り線を避ける。

### 5.4 モーダル/シート

- 乱用しない。フォーカストラップ/ESC/外側クリック閉じるを実装。

- モーダル内のプライマリは 1 つ。副作用は明示。

### 5.5 テーブル/リスト

- 行間に余白。ゼブラ薄め。数字は右寄せ、テキストは左。

- スクロール時はヘッダ固定。レスポンシブ時は列の重要度で折り畳む。

---

## 6. モーション規範

- トランジションは `--dur-fast`/`--dur-base` と `--ease` のみ。

- 目的: **文脈維持・結果の説明**。装飾目的で入れない。

- `prefers-reduced-motion` には**即応**（移動/フェード最小化）。

---

## 7. アクセシビリティ

- コントラスト: 文=4.5:1、UI=3:1 以上。

- `aria-*` とセマンティクス（`<button>`, `<nav>`, `<main>`）を優先使用。

- ライブ領域（通知等）は `aria-live="polite"` を基本。

- 代替テキストは**目的**を書く（"ボタン"ではなく"翻訳を開始"）。

---

## 8. パフォーマンス規範（目標値）

- LCP < **2.5s**、CLS ≈ **0**、INP < **200ms**。

- 初期 JS は可能なら **<120KB**（圧縮後）。巨大 UI/アイコン集は避ける。

- 画像は WebP/AVIF、遅延読込。アイコンはインライン SVG を推奨。

- フォントはシステム優先。Web フォントは可変 1–2 種まで、`font-display: swap`。

---

## 9. 国際化/日本語特有の配慮

- 全角/半角の混在を避ける。

- カタカナ語を連発しない。日本語の**簡潔な常体**を基本に。

- 日付/数値/通貨はロケール表示、入力は ISO/機械可読を併記。

---

## 10. データ状態の設計

- **Loading**: スケルトン>スピナー。待ち時間の目安を短文で示す。

- **Empty**: 目的/最初の行動/例を 3 行以内で提示。

- **Error**: 原因 → 対処 → 再試行。サポート導線を添える。

- **Success**: 次の行動を 1 つ提案（共有/続ける/戻る）。

---

## 11. テーマ/ダークモード

- 背景と面の差は 4–8% 程度。彩度控えめ。黒背景 × 純白文字は避ける（#0B0B0B と #EDEDED 等）。

- アクセント色は同一。意味色はトーンだけ調整。

- 影の代わりに**境界線/層**で表現する。

---

## 12. 実装者ガードレール（AI/人間 共通）

- **新しい色/影/角丸/余白値**を追加しない。必要ならトークンへ提案してから採用。

- HTML セマンティクスと `aria-*` を優先。`div` 多用を避ける。

- 依存ライブラリは headless/小粒のみ。巨大キットは禁止。

- 変更多発領域は**コンポーネント化**し、ドキュメント化する。

---

## 13. アンチパターン（やらないこと）

- 派手なグラデ/過剰な丸み/濃い影/色の乱立。

- フォーカスリングを消す、リングを色依存にする。

- 長文・比喩・専門用語の連打。

- ダイアログ乱発。バナーで画面を占有。

---
